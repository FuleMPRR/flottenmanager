<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flottenmanager</title>
  <style>
    body {
      background-color: #121212;
      color: #f1f1f1;
      font-family: sans-serif;
      padding: 2rem;
    }
    table {
      width: 100%%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      border: 1px solid #333;
      padding: 0.5rem;
      text-align: left;
    }
    input {
      background-color: #1e1e1e;
      color: white;
      border: 1px solid #444;
      padding: 0.3rem;
      margin-bottom: 0.5rem;
    }
    button {
      background-color: #005AE0;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      margin-top: 0.5rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Flottenmanager Ãœbersicht</h1>

  <input type="text" id="filterInput" placeholder="ðŸ” Suche nach Name, Hersteller, etc." oninput="filterTable()" />

  <table id="vehicleTable">
    <thead>
      <tr>
        <th>Fahrzeug ID</th>
        <th>Status</th>
        <th>Nummernschild</th>
        <th>Vorname</th>
        <th>Nachname</th>
        <th>Hersteller</th>
        <th>Kommentar</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>

  <button onclick="exportCSV()">Export als CSV</button>

  <script>
    const data = [
      {
        fahrzeugId: "BE904859",
        status: "Aktiv",
        nummernschild: "ZH 123456",
        vorname: "Martin",
        nachname: "MÃ¼ller",
        hersteller: "Opel",
        kommentar: "Keine"
      },
      {
        fahrzeugId: "BE801234",
        status: "Beantragt",
        nummernschild: "AG 456789",
        vorname: "Petra",
        nachname: "Kupschick",
        hersteller: "Peugeot",
        kommentar: "Wartung offen"
      }
    ];

    function renderTable(rows) {
      const tbody = document.getElementById("tableBody");
      tbody.innerHTML = "";
      rows.forEach(row => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${row.fahrzeugId}</td>
          <td>${row.status}</td>
          <td>${row.nummernschild}</td>
          <td>${row.vorname}</td>
          <td>${row.nachname}</td>
          <td>${row.hersteller}</td>
          <td>${row.kommentar}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function filterTable() {
      const val = document.getElementById("filterInput").value.toLowerCase();
      const filtered = data.filter(d =>
        Object.values(d).some(v => v.toLowerCase().includes(val))
      );
      renderTable(filtered);
    }

    function exportCSV() {
      const csv = ["Fahrzeug ID,Status,Nummernschild,Vorname,Nachname,Hersteller,Kommentar"];
      data.forEach(row => {
        csv.push([
          row.fahrzeugId,
          row.status,
          row.nummernschild,
          row.vorname,
          row.nachname,
          row.hersteller,
          row.kommentar
        ].join(","));
      });
      const blob = new Blob([csv.join("\n")], { type: "text/csv" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "fahrzeuge.csv";
      a.click();
    }

    renderTable(data);
  </script>
</body>
</html>